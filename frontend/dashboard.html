<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Student Event Dashboard</title>

    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
      body {
        background: #e6f6f6;
        font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial;
        color: #0b1220;
        margin: 0;
      }

      /* Sidebar */
      .sidebar {
      width: 250px;
      background: #1f2937;
      color: #fff;
      display: flex;
      flex-direction: column;
      padding: 20px 10px;
      position: fixed;
      top: 0;
      bottom: 0;
    }

    .sidebar h4 {
      color: #fff;
      text-align: center;
      margin-bottom: 30px;
      font-weight: 600;
    }

    .sidebar a {
      color: #cbd5e1;
      text-decoration: none;
      padding: 10px 15px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: all 0.3s;
    }

    .sidebar a:hover,
    .sidebar a.active {
      background: #2563eb;
      color: #fff;
    }

    .sidebar i {
      font-size: 1.1rem;
    }

      /* Main Content */
      .main-content {
        margin-left: 240px;
        padding: 20px;
        transition: margin-left 0.3s ease;
      }

      /* Mobile Sidebar Toggle */
      .sidebar-toggle-btn {
        display: none;
        position: fixed;
        top: 15px;
        left: 15px;
        background: #0d6efd;
        border: none;
        color: white;
        padding: 8px 10px;
        border-radius: 6px;
        z-index: 1100;
      }

      @media (max-width: 991px) {
        .sidebar {
          left: -240px;
        }

        .sidebar.active {
          left: 0;
        }

        .main-content {
          margin-left: 0;
        }

        .sidebar-toggle-btn {
          display: inline-block;
        }
      }

      .container-limited {
        max-width: 1400px;
        margin: 18px auto;
      }
      .kpi-card {
        border-radius: 6px;
        padding: 18px;
      }
      .kpi-number {
        font-size: 2.2rem;
        font-weight: 700;
      }
      .small-muted {
        color: #6b7280;
        font-size: 0.9rem;
      }
      .metric-box {
        background: #fff;
        border-radius: 6px;
        box-shadow: 0 8px 20px rgba(6, 20, 31, 0.06);
      }
      .dashboard-header {
        background: #0891b2;
        color: #fff;
        border-radius: 8px;
        padding: 14px 18px;
      }
      .chart-card {
        background: #fff;
        border-radius: 6px;
        box-shadow: 0 6px 16px rgba(2, 6, 23, 0.06);
      }
      .table-card {
        background: #fff;
        border-radius: 6px;
        box-shadow: 0 6px 16px rgba(2, 6, 23, 0.06);
      }
      .attended-badge {
        color: #065f46;
        background: #d1fae5;
        padding: 6px 10px;
        border-radius: 999px;
        display: inline-block;
        font-weight: 600;
      }
      .absent-badge {
        color: #7f1d1d;
        background: #ffebee;
        padding: 6px 10px;
        border-radius: 999px;
        display: inline-block;
        font-weight: 600;
      }
      .chart-container {
        height: 320px;
        min-height: 160px;
      }
      @media (max-width: 991px) {
        .chart-container {
          height: 260px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Sidebar Toggle Button -->
    <button class="sidebar-toggle-btn" onclick="toggleSidebar()">
      <i class="bi bi-list"></i>
    </button>

    <!-- Sidebar -->
    <!-- Sidebar -->
  <div class="sidebar">
    <h4><i class="bi bi-speedometer2"></i> Admin Panel</h4>
    <a href="admin.html"><i class="bi bi-house-door"></i> Home</a>
    <a href="dashboard.html"><i class="bi bi-house-door"></i> Event Dashboard</a>
    <a href="student_dashboard.html"><i class="bi bi-people"></i> Student Dashboard</a>
    <a href="event.html"><i class="bi bi-calendar-event"></i> Events</a>
    <a href="#students"><i class="bi bi-person-lines-fill"></i> Students</a>
    <a href="index.html" id="logoutBtnSidebar" class="mt-auto text-danger"><i class="bi bi-box-arrow-right"></i> Logout</a>
  </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="container-limited">
        <!-- header -->
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div class="dashboard-header d-flex align-items-center gap-3">
            <div
              style="
                width: 44px;
                height: 44px;
                border-radius: 10px;
                background: rgba(255, 255, 255, 0.08);
                display: flex;
                align-items: center;
                justify-content: center;
              "
            >
              <i class="fas fa-chart-pie" style="font-size: 1.15rem"></i>
            </div>
            <div>
              <div style="font-weight: 700; font-size: 1.05rem">
                Event Participation Dashboard
              </div>
            </div>
          </div>

          <!-- <div class="d-flex gap-2">
            <button
              class="btn btn-outline-primary"
              onclick="window.location.href='index.html'"
            >
              <i class="fas fa-house"></i> &nbsp;Go to Homepage
            </button>
          </div> -->
        </div>

        <!-- controls -->
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div
            style="
              display: flex;
              gap: 12px;
              align-items: flex-end;
              flex-wrap: wrap;
            "
          >
            <div>
              <label class="small-muted mb-1 d-block">Event</label>
              <select
                id="eventSelect"
                class="form-select"
                style="min-width: 320px"
              >
                <option value="">Loading events...</option>
              </select>
            </div>

            <div>
              <label class="small-muted mb-1 d-block"
                >Search (ID / name / dept)</label
              >
              <div style="display: flex; gap: 6px">
                <button id="searchStudentBtn" class="btn btn-primary">
                  Search by Student_ID
                </button>
                <button id="resetBtn" class="btn btn-outline-secondary">
                  <i class="fas fa-rotate-right"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- <div class="text-end small-muted">
            <div style="font-size: 0.9rem">
              Sample UI matching provided image
            </div>
          </div> -->
        </div>

        <!-- KPIs -->
        <div class="row g-3 mb-4">
          <div class="col-md-3">
            <div class="metric-box kpi-card text-center">
              <div class="small-muted">Count of Student_ID</div>
              <div class="kpi-number text-primary" id="kpiUniqueStudents">0</div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="metric-box kpi-card text-center">
              <div class="small-muted">Count of Event_ID</div>
              <div class="kpi-number text-primary" id="kpiUniqueEvents">0</div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="metric-box kpi-card text-center">
              <div class="small-muted">Total Participants (records)</div>
              <div class="kpi-number text-primary" id="kpiTotalParticipants">
                0
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="metric-box kpi-card text-center">
              <div class="small-muted">Attendance %</div>
              <div class="kpi-number text-primary" id="kpiAttendancePercent">
                0%
              </div>
            </div>
          </div>
        </div>

        <!-- charts row 1 -->
        <div class="row g-3 mb-4">
          <div class="col-lg-7">
            <div class="chart-card p-3">
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <h6 class="mb-0 fw-bold">
                  <i class="fas fa-users me-2 text-primary"></i>Count of
                  Student_ID and First Student_Name by Department and Gender
                </h6>
                <small class="small-muted">Gender split</small>
              </div>
              <div class="chart-container">
                <canvas id="deptGenderChart"></canvas>
              </div>
            </div>
          </div>

          <div class="col-lg-5">
            <div class="chart-card p-3">
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <h6 class="mb-0 fw-bold">
                  <i class="fas fa-chart-bar me-2 text-primary"></i>Count of
                  Student_ID by Event_Name
                </h6>
                <small class="small-muted">Top events</small>
              </div>
              <div class="chart-container">
                <canvas id="eventCountChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- charts row 2 -->
        <div class="row g-3 mb-4">
          <div class="col-lg-4">
            <div class="chart-card p-3">
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <h6 class="mb-0 fw-bold">
                  <i class="fas fa-donut-small me-2 text-primary"></i>Total
                  Participants by Event_Type
                </h6>
                <small class="small-muted">Distribution</small>
              </div>
              <div class="chart-container" style="height: 240px">
                <canvas id="eventTypeChart"></canvas>
              </div>
            </div>
          </div>

          <div class="col-lg-8">
            <div class="chart-card p-3">
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <h6 class="mb-0 fw-bold">
                  <i class="fas fa-line-chart me-2 text-primary"></i>Total
                  Participants by Year
                </h6>
                <small class="small-muted">Trend</small>
              </div>
              <div class="chart-container" style="height: 240px">
                <canvas id="yearlyChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- participants table -->
        <div class="table-card p-3 mb-5">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h6 class="mb-0 fw-bold">
              <i class="fas fa-list me-2 text-primary"></i>Participants (Preview)
            </h6>
            <small class="small-muted"
              >Click a student name to open details</small
            >
          </div>

          <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
              <thead class="table-light">
                <tr>
                  <th>Student Name</th>
                  <th>Department</th>
                  <th>Role</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody id="participantsTableBody">
                <tr>
                  <td colspan="4" class="text-center text-muted py-4">
                    Select an event to view participants
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="dashboard.js"></script>

    <script>
      function toggleSidebar() {
        document.getElementById("sidebar").classList.toggle("active");
      }
    </script>
  </body>
</html>
